"use strict";(self.webpackChunkying_blog=self.webpackChunkying_blog||[]).push([[7322],{9882:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>d});var o=t(3274),c=t(9128);const s={id:"http",sidebar_label:"HTTP \u534f\u8bae",title:"HTTP \u534f\u8bae"},r=void 0,l={id:"nodejs/net/http",title:"HTTP \u534f\u8bae",description:"\u672c\u7bc7\u6765\u770b\u4e0b nodejs \u91cc\u7684 http \u534f\u8bae\uff0c\u5b83\u662f\u6211\u4eec\u5728\u65e5\u5e38\u5de5\u4f5c\u4e2d\u63a5\u89e6\u6700\u591a\u7684\u4e00\u4e2a\u534f\u8bae\u3002",source:"@site/docs/nodejs/11-net/05-http.md",sourceDirName:"nodejs/11-net",slug:"/nodejs/net/http",permalink:"/docs/nodejs/net/http",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{id:"http",sidebar_label:"HTTP \u534f\u8bae",title:"HTTP \u534f\u8bae"},sidebar:"nodejs",previous:{title:"TCP \u6570\u636e\u7c98\u5305\u4e0e\u89e3\u51b3",permalink:"/docs/nodejs/net/tcp-packet-fragmentation"}},i={},d=[{value:"\u901a\u8fc7 net \u6a21\u5757\u54cd\u5e94 http \u534f\u8bae",id:"\u901a\u8fc7-net-\u6a21\u5757\u54cd\u5e94-http-\u534f\u8bae",level:3},{value:"http \u6a21\u5757",id:"http-\u6a21\u5757",level:3},{value:"\u83b7\u53d6 http \u8bf7\u6c42\u4f53\u7684\u4fe1\u606f",id:"\u83b7\u53d6-http-\u8bf7\u6c42\u4f53\u7684\u4fe1\u606f",level:3}];function a(e){const n={code:"code",h3:"h3",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"\u672c\u7bc7\u6765\u770b\u4e0b nodejs \u91cc\u7684 http \u534f\u8bae\uff0c\u5b83\u662f\u6211\u4eec\u5728\u65e5\u5e38\u5de5\u4f5c\u4e2d\u63a5\u89e6\u6700\u591a\u7684\u4e00\u4e2a\u534f\u8bae\u3002"}),"\n",(0,o.jsx)(n.h3,{id:"\u901a\u8fc7-net-\u6a21\u5757\u54cd\u5e94-http-\u534f\u8bae",children:"\u901a\u8fc7 net \u6a21\u5757\u54cd\u5e94 http \u534f\u8bae"}),"\n",(0,o.jsx)(n.p,{children:"\u6211\u4eec\u4f9d\u65e7\u901a\u8fc7 net \u6a21\u5757\u53bb\u521b\u5efa\u4e00\u4e2a\u670d\u52a1\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"const net = require('net')\n\nconst server = net.createServer()\n\nserver.listen(1234, () => {\n  console.log('\u670d\u52a1\u542f\u52a8\u4e86')\n})\n\nserver.on('connection', socket => {\n  socket.on('data', chunk => {\n    console.log(chunk.toString())\n  })\n})\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u76f4\u63a5\u4ece\u6d4f\u89c8\u5668\u8bbf\u95ee ",(0,o.jsx)(n.code,{children:"localhost:1234"}),"\uff0c\u6b64\u65f6\u6d4f\u89c8\u5668\u4f1a\u4e00\u76f4\u5728\u8f6c\u4e0d\u4f1a\u663e\u793a\u5185\u5bb9\uff0c\u53ef\u4ee5\u770b\u5230 ",(0,o.jsx)(n.code,{children:"data"})," \u4e8b\u4ef6\u8f93\u51fa\u4e86\u4ee5\u4e0b\u5185\u5bb9\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'\u670d\u52a1\u542f\u52a8\u4e86\nGET / HTTP/1.1\nHost: localhost:1234\nConnection: keep-alive\nsec-ch-ua: "Chromium";v="130", "Google Chrome";v="130", "Not?A_Brand";v="99"\nsec-ch-ua-mobile: ?0\nsec-ch-ua-platform: "Windows"\nUpgrade-Insecure-Requests: 1\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\nSec-Fetch-Site: none\nSec-Fetch-Mode: navigate\nSec-Fetch-User: ?1\nSec-Fetch-Dest: document\nAccept-Encoding: gzip, deflate, br, zstd\nAccept-Language: vi,zh-CN;q=0.9,zh-TW;q=0.8,zh;q=0.7,en;q=0.6\nCookie: ying-lng=en\n\n\n'})}),"\n",(0,o.jsx)(n.p,{children:"\u5728\u6211\u4eec\u7684 tcp \u7684\u57fa\u7840\u4e4b\u4e0a\uff0c\u6211\u4eec\u8fd9\u4e2a\u6d4f\u89c8\u5668\u5c31\u4f1a\u57fa\u4e8e\u6211\u4eec\u7684 http \u534f\u8bae\uff0c\u6765\u5f80\u6211\u4eec\u7684\u670d\u52a1\u7aef\u53bb\u53d1\u9001\u4e00\u4e9b\u5185\u5bb9\uff0c\u4e5f\u5c31\u662f\u4e0a\u9762\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u770b\u5230\u5305\u542b\u4e86\u8bf7\u6c42\u884c\uff0c\u5b83\u7684\u91cc\u8fb9\u5c31\u5305\u542b\u4e86\u6211\u4eec\u7684\u8bf7\u6c42\u65b9\u5f0f\uff0c\u4ee5\u53ca\u8bf7\u6c42\u8def\u5f84\u548c\u8bf7\u6c42\u7684\u534f\u8bae\u548c\u7248\u672c\u53f7\uff0c\u518d\u5f80\u4e0b\u5c31\u662f\u8bf7\u6c42\u5934\uff0c\u518d\u5f80\u4e0b\u8fd8\u4f1a\u6709\u4e00\u4e2a\u8bf7\u6c42\u7684\u7a7a\u884c\uff0c\u6700\u540e\u5728\u8bf7\u6c42\u7a7a\u884c\u7684\u4e0b\u8fb9\u5c31\u662f\u6211\u4eec\u7684\u8bf7\u6c42\u4f53\uff0c\u8fd9\u4e2a\u662f\u7a7a\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u73b0\u5728\u53d1\u9001\u7684\u662f\u4e00\u4e2a get \u8bf7\u6c42\uff0c\u6240\u4ee5\u8fd9\u91cc\u8fb9\u6211\u4eec\u5e76\u6ca1\u6709\u4ec0\u4e48\u8bf7\u6c42\u4f53\u7684\u6570\u636e\u3002"}),"\n",(0,o.jsx)(n.p,{children:"\u73b0\u5728\u6d4f\u89c8\u5668\u4e00\u76f4\u6ca1\u6709\u5185\u5bb9\u662f\u56e0\u4e3a\u6211\u4eec\u6ca1\u6709\u54cd\u5e94\u6570\u636e\u56de\u53bb\uff0c\u90a3\u63a5\u4e0b\u6765\u6211\u4eec\u53ef\u4ee5\u8bd5\u4e0b\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a\u54cd\u5e94\u4f53\u7684\u5185\u5bb9\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"server.on('connection', socket => {\n  socket.on('data', chunk => {\n    // console.log(chunk.toString());\n\n    socket.write(`HTTP/1.1 200 OK\nDate: Wed, 30 Oct 2024 12:49:56 GMT\nConnection: keep-alive\nKeep-Alive: timeout=5\nContent-Length: 11\n\nhello world`)\n\n    socket.end()\n  })\n})\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u6d4f\u89c8\u5668\u5237\u65b0\u4e00\u4e0b ",(0,o.jsx)(n.code,{children:"localhost:1234"}),"\uff0c\u53ef\u4ee5\u770b\u5230 ",(0,o.jsx)(n.code,{children:"hello world"})," \u663e\u793a\u5728\u4e86\u9875\u9762\u4e0a\u3002"]}),"\n",(0,o.jsx)(n.h3,{id:"http-\u6a21\u5757",children:"http \u6a21\u5757"}),"\n",(0,o.jsx)(n.p,{children:"\u5982\u679c\u6211\u4eec\u6b63\u5e38\u8fdb\u884c web api \u7684\u5f00\u53d1\uff0c\u4e00\u822c\u4f1a\u4f7f\u7528 nodejs \u5f53\u4e2d\u7684 http \u6a21\u5757\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"const http = require('http')\n\nconst server = http.createServer((req, res) => {\n  console.log(req.url)\n  console.log(req.method)\n\n  res.end('hello world')\n})\n\nserver.listen(1234, () => {\n  console.log('\u670d\u52a1\u542f\u52a8\u4e86')\n})\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u53ef\u4ee5\u770b\u5230\u4f7f\u7528\u660e\u663e\u66f4\u52a0\u7684\u65b9\u4fbf\uff0c\u6bcf\u6b21\u6709\u8bf7\u6c42\u8fdb\u6765\u90fd\u4f1a\u8fdb\u5165\u56de\u8c03\u51fd\u6570\uff0c\u7136\u540e\u5728\u56de\u8c03\u91cc\u901a\u8fc7\u4f20\u9012\u8fc7\u6765\u7684\u4e24\u4e2a\u53c2\u6570\u5904\u7406\u4e1a\u52a1\u5c31\u597d\uff0c\u5176\u4e2d ",(0,o.jsx)(n.code,{children:"req"})," \u4ee3\u8868\u8bf7\u6c42\uff0c\u5b83\u662f\u4e00\u4e2a\u53ef\u8bfb\u6d41\uff0c",(0,o.jsx)(n.code,{children:"res"})," \u4ee3\u8868\u54cd\u5e94\uff0c\u5b83\u662f\u4e00\u4e2a\u53ef\u5199\u6d41\uff0c\u53ef\u4ee5\u770b\u5230\u4ee3\u7801\u4e2d\uff0c\u6211\u4e5f\u662f\u76f4\u63a5\u8c03\u7528\u53ef\u5199\u6d41\u7684 ",(0,o.jsx)(n.code,{children:"end"})," \u65b9\u6cd5\u7ed9\u54cd\u5e94\u5199\u5165\u4e86\u6570\u636e\uff0c\u540e\u7eed\u6700\u7ec8\u7684\u5185\u5bb9\u5c31\u4f1a\u663e\u793a\u7ed9\u6d4f\u89c8\u5668\u4e86\u3002"]}),"\n",(0,o.jsx)(n.h3,{id:"\u83b7\u53d6-http-\u8bf7\u6c42\u4f53\u7684\u4fe1\u606f",children:"\u83b7\u53d6 http \u8bf7\u6c42\u4f53\u7684\u4fe1\u606f"}),"\n",(0,o.jsxs)(n.p,{children:["\u6211\u8fd9\u91cc\u76f4\u63a5\u901a\u8fc7 ",(0,o.jsx)(n.code,{children:"curl"})," \u53d1\u9001\u4e86\u4e00\u4e2a POST \u8bf7\u6c42\u8fdb\u884c\u6d4b\u8bd5\uff0c",(0,o.jsx)(n.code,{children:'curl -v -X POST -d "{"a": 123}"  http://localhost:1234'}),"\uff0c\u5176\u4e2d -d \u5c31\u662f\u8981\u53d1\u9001\u7684\u6570\u636e\uff0c\u90a3\u63a5\u4e0b\u6765\u5c31\u770b\u4e00\u4e0b\u5982\u4f55\u83b7\u53d6\u8bf7\u6c42\u4f53\u91cc\u9762\u7684\u6570\u636e\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"const server = http.createServer((req, res) => {\n  console.log(req.url)\n  console.log(req.method)\n\n  // \u83b7\u53d6\u8bf7\u6c42\u4f53\u6570\u636e\n  let arr = []\n  req.on('data', chunk => {\n    arr.push(chunk)\n  })\n  req.on('end', () => {\n    console.log(Buffer.concat(arr).toString())\n  })\n\n  res.end('hello world')\n})\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u53ef\u4ee5\u770b\u5230\u662f\u80fd\u62ff\u5230 ",(0,o.jsx)(n.code,{children:"{a: 123}"})," \u8fd9\u4e2a\u6570\u636e\u7684\u3002"]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},9128:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var o=t(9474);const c={},s=o.createContext(c);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);
"use strict";(self.webpackChunkying_blog=self.webpackChunkying_blog||[]).push([[4889],{5645:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>i});var r=t(3274),s=t(9128);const a={id:"file-readable",sidebar_label:"\u6587\u4ef6\u53ef\u8bfb\u6d41",title:"\u6587\u4ef6\u53ef\u8bfb\u6d41"},l=void 0,o={id:"nodejs/stream/file-readable",title:"\u6587\u4ef6\u53ef\u8bfb\u6d41",description:"\u672c\u7bc7\u6765\u770b\u4e00\u4e0b\u6587\u4ef6\u7684\u53ef\u8bfb\u6d41\u64cd\u4f5c\uff0c\u5b83\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u7ee7\u627f\u4e86 Readable \u4e0e EventEmitter \u7c7b\u7684\u5185\u7f6e api\uff0c\u53ef\u4ee5\u53bb\u901a\u8fc7 fs \u6765\u521b\u5efa\u4f7f\u7528\uff0c\u5f53\u524d\u8981\u505a\u7684\u5c31\u662f\u77e5\u9053\u5982\u4f55\u6765\u4f7f\u7528\u5b83\u53bb\u521b\u5efa\u548c\u6d88\u8d39\u6570\u636e\uff0c\u4ee5\u53ca\u4ed6\u8eab\u4e0a\u5e38\u89c1\u7684\u4e8b\u4ef6\u3002",source:"@site/docs/nodejs/10-stream/05-file-readable.md",sourceDirName:"nodejs/10-stream",slug:"/nodejs/stream/file-readable",permalink:"/docs/nodejs/stream/file-readable",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{id:"file-readable",sidebar_label:"\u6587\u4ef6\u53ef\u8bfb\u6d41",title:"\u6587\u4ef6\u53ef\u8bfb\u6d41"},sidebar:"nodejs",previous:{title:"\u53cc\u5de5\u548c\u8f6c\u6362\u6d41",permalink:"/docs/nodejs/stream/duplex-transform"},next:{title:"\u6587\u4ef6\u53ef\u5199\u6d41",permalink:"/docs/nodejs/stream/file-writeable"}},d={},i=[{value:"data \u4e8b\u4ef6\u8bfb\u6570\u636e",id:"data-\u4e8b\u4ef6\u8bfb\u6570\u636e",level:3},{value:"readable \u4e8b\u4ef6\u8bfb\u6570\u636e",id:"readable-\u4e8b\u4ef6\u8bfb\u6570\u636e",level:3}];function c(e){const n={code:"code",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["\u672c\u7bc7\u6765\u770b\u4e00\u4e0b\u6587\u4ef6\u7684\u53ef\u8bfb\u6d41\u64cd\u4f5c\uff0c\u5b83\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u7ee7\u627f\u4e86 ",(0,r.jsx)(n.code,{children:"Readable"})," \u4e0e ",(0,r.jsx)(n.code,{children:"EventEmitter"})," \u7c7b\u7684\u5185\u7f6e api\uff0c\u53ef\u4ee5\u53bb\u901a\u8fc7 fs \u6765\u521b\u5efa\u4f7f\u7528\uff0c\u5f53\u524d\u8981\u505a\u7684\u5c31\u662f\u77e5\u9053\u5982\u4f55\u6765\u4f7f\u7528\u5b83\u53bb\u521b\u5efa\u548c\u6d88\u8d39\u6570\u636e\uff0c\u4ee5\u53ca\u4ed6\u8eab\u4e0a\u5e38\u89c1\u7684\u4e8b\u4ef6\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"data-\u4e8b\u4ef6\u8bfb\u6570\u636e",children:"data \u4e8b\u4ef6\u8bfb\u6570\u636e"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const fs = require('fs')\n\nlet rs = fs.createReadStream('text.txt', {\n  flags: 'r',\n  encoding: null, // \u9ed8\u8ba4\u4e3anull\uff0c\u8868\u793a\u5f53\u524d\u4f1a\u4ee5 buffer \u7684\u7c7b\u578b\u8fdb\u884c\u8bfb\u53d6\n  fd: null,\n  mode: 0o666,\n  autoClose: true,\n  start: 0, // \u4ece\u54ea\u4e2a\u4f4d\u7f6e\u5f00\u59cb\u8bfb\n  end: 6, // \u4ece\u54ea\u4e2a\u4f4d\u7f6e\u7ed3\u675f\n  highWaterMark: 2 // \u8868\u793a\u7f13\u51b2\u533a\u7684\u5927\u5c0f\n})\n\nrs.on('data', chunk => {\n  console.log(chunk.toString())\n  rs.pause() // \u6bcf\u6b21\u8bfb\u5b8c\u6682\u505c\u4e00\u4e0b\n  setTimeout(() => {\n    rs.resume() // 1\u79d2\u540e\u91cd\u65b0\u542f\u52a8\u7ee7\u7eed\u8bfb\n  }, 1000)\n})\n"})}),"\n",(0,r.jsx)(n.h3,{id:"readable-\u4e8b\u4ef6\u8bfb\u6570\u636e",children:"readable \u4e8b\u4ef6\u8bfb\u6570\u636e"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const fs = require('fs')\n\nlet rs = fs.createReadStream('text.txt', {\n  flags: 'r',\n  encoding: null, // \u9ed8\u8ba4\u4e3anull\uff0c\u8868\u793a\u5f53\u524d\u4f1a\u4ee5 buffer \u7684\u7c7b\u578b\u8fdb\u884c\u8bfb\u53d6\n  fd: null,\n  mode: 0o666,\n  autoClose: true,\n  start: 0, // \u4ece\u54ea\u4e2a\u4f4d\u7f6e\u5f00\u59cb\u8bfb\n  end: 6, // \u4ece\u54ea\u4e2a\u4f4d\u7f6e\u7ed3\u675f\n  highWaterMark: 2 // \u8868\u793a\u6bcf\u6b21\u8981\u8bfb\u591a\u5c11\u5b57\u8282\u7684\u6570\u636e\n})\n\nrs.on('readable', () => {\n  const chunk = rs.read()\n  if (chunk !== null) {\n    console.log(chunk.toString())\n  }\n})\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u53ef\u4ee5\u770b\u5230\u4f7f\u7528\u57fa\u672c\u548c\u524d\u51e0\u7ae0\u7684\u81ea\u5b9a\u4e49 ",(0,r.jsx)(n.code,{children:"Readable"})," \u662f\u4e00\u6837\u3002"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},9128:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>o});var r=t(9474);const s={},a=r.createContext(s);function l(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);
"use strict";(self.webpackChunkying_blog=self.webpackChunkying_blog||[]).push([[3020],{9613:(e,n,r)=>{r.d(n,{Zo:()=>c,kt:()=>f});var t=r(9496);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function l(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function i(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?l(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function o(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},l=Object.keys(e);for(t=0;t<l.length;t++)r=l[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)r=l[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var d=t.createContext({}),p=function(e){var n=t.useContext(d),r=n;return e&&(r="function"==typeof e?e(n):i(i({},n),e)),r},c=function(e){var n=p(e.components);return t.createElement(d.Provider,{value:n},e.children)},u="mdxType",s={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},m=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,l=e.originalType,d=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=p(r),m=a,f=u["".concat(d,".").concat(m)]||u[m]||s[m]||l;return r?t.createElement(f,i(i({ref:n},c),{},{components:r})):t.createElement(f,i({ref:n},c))}));function f(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=r.length,i=new Array(l);i[0]=m;var o={};for(var d in n)hasOwnProperty.call(n,d)&&(o[d]=n[d]);o.originalType=e,o[u]="string"==typeof e?e:a,i[1]=o;for(var p=2;p<l;p++)i[p]=r[p];return t.createElement.apply(null,i)}return t.createElement.apply(null,r)}m.displayName="MDXCreateElement"},3166:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>s,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var t=r(8957),a=(r(9496),r(9613));const l={slug:"array-to-tree-structure",date:new Date("2021-11-15T00:00:00.000Z"),title:"\u6570\u7ec4\u8f6c\u6811\u5f62\u7ed3\u6784",authors:["jack"],tags:["js","\u524d\u7aef"]},i=void 0,o={permalink:"/blog/array-to-tree-structure",source:"@site/blog/\u6570\u7ec4\u8f6c\u6811\u5f62\u7ed3\u6784.md",title:"\u6570\u7ec4\u8f6c\u6811\u5f62\u7ed3\u6784",description:"\u4e0b\u9762\u662f\u8f93\u5165\u8f93\u51fa\u7684\u6548\u679c",date:"2021-11-15T00:00:00.000Z",formattedDate:"2021\u5e7411\u670815\u65e5",tags:[{label:"js",permalink:"/blog/tags/js"},{label:"\u524d\u7aef",permalink:"/blog/tags/\u524d\u7aef"}],readingTime:2.295,hasTruncateMarker:!0,authors:[{name:"Jack Deng",title:"Typescript \u5168\u6808\u5f00\u53d1\u8005",url:"https://github.com/jackdeng666",imageURL:"https://github.com/jackdeng666.png",key:"jack"}],frontMatter:{slug:"array-to-tree-structure",date:"2021-11-15T00:00:00.000Z",title:"\u6570\u7ec4\u8f6c\u6811\u5f62\u7ed3\u6784",authors:["jack"],tags:["js","\u524d\u7aef"]},prevItem:{title:"\u628a\u6587\u4ef6\u8f6c\u6210base64\u6570\u636e\u548cblobUrl",permalink:"/blog/convert-file-into-base64-and-blobUrl"},nextItem:{title:"pm2\u90e8\u7f72nodejs\u540e\u53f0\u670d\u52a1",permalink:"/blog/pm2-deploying-node-services"}},d={authorsImageUrls:[void 0]},p=[{value:"\u4e0b\u9762\u662f\u8f93\u5165\u8f93\u51fa\u7684\u6548\u679c",id:"\u4e0b\u9762\u662f\u8f93\u5165\u8f93\u51fa\u7684\u6548\u679c",level:3},{value:"\u6bd4\u8f83\u597d\u7406\u89e3\u7684\u7248\u672c",id:"\u6bd4\u8f83\u597d\u7406\u89e3\u7684\u7248\u672c",level:3},{value:"\u6bd4\u8f83\u9a9a\u7684\u7248\u672c",id:"\u6bd4\u8f83\u9a9a\u7684\u7248\u672c",level:3},{value:"\u987a\u4fbf\u83b7\u53d6\u6811\u7ed3\u6784\u5c42\u6570",id:"\u987a\u4fbf\u83b7\u53d6\u6811\u7ed3\u6784\u5c42\u6570",level:3},{value:"\u901a\u8fc7\u539f\u59cb\u6570\u7ec4\uff0c\u6839\u636e\u8282\u70b9\u552f\u4e00\u503c\u83b7\u53d6\u6574\u4e2a\u6811\u9875\u4e0a\u67d0\u4e2a\u4fe1\u606f\u7684\u6570\u7ec4\u62fc\u63a5",id:"\u901a\u8fc7\u539f\u59cb\u6570\u7ec4\u6839\u636e\u8282\u70b9\u552f\u4e00\u503c\u83b7\u53d6\u6574\u4e2a\u6811\u9875\u4e0a\u67d0\u4e2a\u4fe1\u606f\u7684\u6570\u7ec4\u62fc\u63a5",level:3}],c={toc:p},u="wrapper";function s(e){let{components:n,...r}=e;return(0,a.kt)(u,(0,t.Z)({},c,r,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h3",{id:"\u4e0b\u9762\u662f\u8f93\u5165\u8f93\u51fa\u7684\u6548\u679c"},"\u4e0b\u9762\u662f\u8f93\u5165\u8f93\u51fa\u7684\u6548\u679c"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let arr = [\n  { id: 1, name: '\u4fdd\u5b89\u9547' },\n  { parentId: 1, id: 2, name: '\u6c34\u53e3\u6751' },\n  { parentId: 1, id: 4, name: '\u9ec4\u6c34\u6751' },\n  { parentId: 4, id: 10, name: '\u7f51\u683c\u4e00' },\n  { parentId: 4, id: 12, name: '\u7f51\u683c\u4e8c' },\n  { parentId: 2, id: 21, name: '\u5580\u5580\u5580' },\n  { parentId: 2, id: 22, name: '\u54c8\u54c8\u54c8' }\n]\nlet treeData = arrayToTree(arr, undefined)\nconsole.log(treeData)\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"[\n  // \u6253\u5370\n  {\n    id: 1,\n    name: '\u4fdd\u5b89\u9547',\n    children: [\n      {\n        parentId: 1,\n        id: 2,\n        name: '\u6c34\u53e3\u6751',\n        children: [\n          {\n            parentId: 2,\n            id: 21,\n            name: '\u5580\u5580\u5580',\n            children: []\n          },\n          {\n            parentId: 2,\n            id: 22,\n            name: '\u54c8\u54c8\u54c8',\n            children: []\n          }\n        ]\n      },\n      {\n        parentId: 1,\n        id: 4,\n        name: '\u9ec4\u6c34\u6751',\n        children: [\n          {\n            parentId: 4,\n            id: 10,\n            name: '\u7f51\u683c\u4e00',\n            children: []\n          },\n          {\n            parentId: 4,\n            id: 12,\n            name: '\u7f51\u683c\u4e8c',\n            children: []\n          }\n        ]\n      }\n    ]\n  }\n]\n")),(0,a.kt)("h3",{id:"\u6bd4\u8f83\u597d\u7406\u89e3\u7684\u7248\u672c"},"\u6bd4\u8f83\u597d\u7406\u89e3\u7684\u7248\u672c"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function arrayToTree(array, parentId) {\n  const res = []\n  array.forEach((el) => {\n    if (el.parentId == parentId) {\n      el.children = arrayToTree(array, el.id)\n      res.push(el)\n    }\n  })\n  return res\n}\n")),(0,a.kt)("h3",{id:"\u6bd4\u8f83\u9a9a\u7684\u7248\u672c"},"\u6bd4\u8f83\u9a9a\u7684\u7248\u672c"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function arrayToTree(array, parentId) {\n  return array\n    .filter((item) => item.parentId == parentId)\n    .map((item) => ({ ...item, children: arrayToTree(array, item.id) }))\n}\n")),(0,a.kt)("h3",{id:"\u987a\u4fbf\u83b7\u53d6\u6811\u7ed3\u6784\u5c42\u6570"},"\u987a\u4fbf\u83b7\u53d6\u6811\u7ed3\u6784\u5c42\u6570"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// \u6570\u7ec4\u8f6c\u6811\u7ed3\u6784\u987a\u4fbf\u83b7\u53d6\u6811\u7ed3\u6784\u5c42\u6570\nexport function arrayToTreeHasNum(array, parentId) {\n  let layerNum = 0 // \u5c42\u6570\n  function arrayToTree(array, parentId) {\n    const res = []\n    array.forEach((el) => {\n      if (el.parentId == parentId) {\n        const children = arrayToTree(array, el.id)\n        if (children.length > 0) {\n          layerNum++\n          el.children = children\n        }\n        res.push(el)\n      }\n    })\n    return res\n  }\n  return {\n    arr: arrayToTree(array, parentId),\n    layerNum\n  }\n}\n")),(0,a.kt)("h3",{id:"\u901a\u8fc7\u539f\u59cb\u6570\u7ec4\u6839\u636e\u8282\u70b9\u552f\u4e00\u503c\u83b7\u53d6\u6574\u4e2a\u6811\u9875\u4e0a\u67d0\u4e2a\u4fe1\u606f\u7684\u6570\u7ec4\u62fc\u63a5"},"\u901a\u8fc7\u539f\u59cb\u6570\u7ec4\uff0c\u6839\u636e\u8282\u70b9\u552f\u4e00\u503c\u83b7\u53d6\u6574\u4e2a\u6811\u9875\u4e0a\u67d0\u4e2a\u4fe1\u606f\u7684\u6570\u7ec4\u62fc\u63a5"),(0,a.kt)("p",null,"\u6548\u679c"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"console.log(getTreeInfoById(arr, 'name', 'id', 'parentId', 21))\n// [ '\u4fdd\u5b89\u9547', '\u6c34\u53e3\u6751', '\u5580\u5580\u5580' ]\n")),(0,a.kt)("p",null,"\u5b9e\u73b0"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// \u6811\u7ed3\u6784\uff0c\u901a\u8fc7\u539f\u59cb\u6570\u7ec4\uff0c\u6839\u636e\u8282\u70b9\u552f\u4e00\u503c\u83b7\u53d6\u6574\u4e2a\u6811\u9875\u4e0a\u67d0\u4e2a\u4fe1\u606f\u7684\u6570\u7ec4\u62fc\u63a5\nexport function getTreeInfoById(arr, infoField, idField, parentIdFiled, id) {\n  let newArr = []\n  let data = arr.find((el) => el[idField] == id)\n  newArr.unshift(data[infoField])\n  if (data[parentIdFiled]) {\n    newArr.unshift(\n      ...getTreeInfoById(\n        arr,\n        infoField,\n        idField,\n        parentIdFiled,\n        data[parentIdFiled]\n      )\n    )\n  }\n  return newArr\n}\n")))}s.isMDXComponent=!0}}]);